
PRO mosaic08312020
  ;Processing details #1
  date='08312020'     ;mmddyyyy
  starttime=1                ;seconds
  stoptime=80000                ;seconds
  pthfile='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\TAS_files\20200831_TAS.txt'                 ;Name of file with TAS data
  outdir='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\20200831\'            ;Output directory
  fn=[$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200831_certification/PIP/20200831/imagefiles/Imagefile_1PIP_20200831071028',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200831_certification/PIP/20200831/imagefiles/Imagefile_1PIP_20200831095611',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200831_certification/PIP/20200831/imagefiles/Imagefile_1PIP_20200831101117']    
  batch_process, fn, date, starttime, stoptime, pthfile, outdir
END


PRO mosaic09022020
  ;Processing details #1
  date='09022020'     ;mmddyyyy
  starttime=1                ;seconds
  stoptime=80000                ;seconds
  pthfile='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\TAS_files\20200902_TAS.txt'                 ;Name of file with TAS data
  outdir='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\20200902\'            ;Output directory
  fn=[$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200902_F5/PIP/20200902/20200902063749/Imagefile_1PIP_20200902063749']
  batch_process, fn, date, starttime, stoptime, pthfile, outdir
END


PRO mosaic09042020
  ;Processing details #1
  date='09042020'     ;mmddyyyy
  starttime=1              ;seconds
  stoptime=80000                ;seconds
  pthfile='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\TAS_files\20200904_TAS.txt'                 ;Name of file with TAS data
  outdir='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\20200904\'            ;Output directory
  fn=[$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200904_F6/PIP/20200904/20200904121555/Imagefile_1PIP_20200904121555',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200904_F6/PIP/20200904/20200904121555/Imagefile_1PIP_20200904171504']
  batch_process, fn, date, starttime, stoptime, pthfile, outdir
END



PRO mosaic09072020
  ;Processing details #1
  date='09072020'     ;mmddyyyy
  starttime=1                ;seconds
  stoptime=80000                ;seconds
  pthfile='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\TAS_files\20200907_TAS.txt'                 ;Name of file with TAS data
  outdir='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\20200907\'            ;Output directory
  fn=[$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907074604',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907085816',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907090117',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907090504',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907104446',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907105755',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907110053',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907110430',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907110825',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907111241',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907111751',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907113221',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907131805',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907132105',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907132429',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907133010',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907133642',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907134813',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200907_F7_remote_sensing/PIP/20200907/20200907074604/Imagefile_1PIP_20200907135510']
  batch_process, fn, date, starttime, stoptime, pthfile, outdir
END

PRO mosaic09082020
  ;Processing details #1
  date='09082020'     ;mmddyyyy
  starttime=1                ;seconds
  stoptime=80000                ;seconds
  pthfile='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\TAS_files\20200908_TAS.txt'                 ;Name of file with TAS data
  outdir='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\20200908\'            ;Output directory
  fn=[$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200908_F8_insitu_over_ice/PIP/20200908/20200908074102/Imagefile_1PIP_20200908074102']  
  batch_process, fn, date, starttime, stoptime, pthfile, outdir
END


PRO mosaic09102020
  ;Processing details #1
  date='09102020'     ;mmddyyyy
  starttime=1                ;seconds
  stoptime=80000                ;seconds
  pthfile='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\TAS_files\20200910_TAS.txt'                 ;Name of file with TAS data
  outdir='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\20200910\'            ;Output directory
  fn=[$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200910_F9_insitu_cover_ice/PIP/20200910/imagefiles/Imagefile_1PIP_20200910080912',$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200910_F9_insitu_cover_ice/PIP/20200910/imagefiles/Imagefile_1PIP_20200910113011']
  batch_process, fn, date, starttime, stoptime, pthfile, outdir
END


PRO mosaic09112020
  ;Processing details #1
  date='09112020'     ;mmddyyyy
  starttime=1                ;seconds
  stoptime=80000                ;seconds
  pthfile='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\TAS_files\20200911_TAS.txt'                 ;Name of file with TAS data
  outdir='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\20200911\'            ;Output directory
  fn=[$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200911_F10_insitu_over_ice/PIP/20200911/imagefiles/Imagefile_1PIP_20200911084503']
  batch_process, fn, date, starttime, stoptime, pthfile, outdir
END


PRO mosaic09132020
  ;Processing details #1
  date='09132020'     ;mmddyyyy
  starttime=1                ;seconds
  stoptime=80000                ;seconds
  pthfile='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\TAS_files\20200913_TAS.txt'                 ;Name of file with TAS data
  outdir='E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\20200913\'            ;Output directory
  fn=[$
    'E:/Backup MOSAiC Daten_nicht die Enddaten 20200925/MOSAiC_ACAS/Daten/20200913_F11_ice_next_to_Greenland/PIP/20200913/20200913090224/Imagefile_1PIP_20200913090224']
  batch_process, fn, date, starttime, stoptime, pthfile, outdir
END



PRO batch_process, fn, date, starttime, stoptime, pthfile, outdir
  ;Probe parameters, most are stored in soda2_probespecs
  probe=soda2_probespecs(name='DLR PIP (PADS)')

  ;Processing details and options
  ;endbins=[0.5, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 9.5, 10.5, 11.5, 12.5, 13.5, 14.5, 15.5, 16.5, 17.5, 18.5, 19.5, 20.5, 21.5, 22.5, 23.5, 24.5, 25.5, 26.5, 27.5, 28.5, 29.5, 30.5, 31.5, 32.5, 33.5, 34.5, 35.5, 36.5, 37.5, 38.5, 39.5, 40.5, 41.5, 42.5, 43.5, 44.5, 45.5, 46.5, 47.5, 48.5, 49.5, 50.5, 51.5, 52.5, 53.5, 54.5, 55.5, 56.5, 57.5, 58.5, 59.5, 60.5, 61.5, 62.5, 63.5, 64.5]
  ; Resolution is 103! (from Calibration)
  endbins=[51.5, 154.5, 257.5, 360.5, 463.5, 566.5, 669.5, 772.5, 875.5, 978.5, 1081.5, 1184.5, 1287.5, 1390.5, 1493.5, 1596.5, 1699.5, 1802.5, 1905.5, 2008.5, 2111.5, 2214.5, 2317.5, 2420.5, 2523.5, 2626.5, 2729.5, 2832.5, 2935.5, 3038.5, 3141.5, 3244.5, 3347.5, 3450.5, 3553.5, 3656.5, 3759.5, 3862.5, 3965.5, 4068.5, 4171.5, 4274.5, 4377.5, 4480.5, 4583.5, 4686.5, 4789.5, 4892.5, 4995.5, 5098.5, 5201.5, 5304.5, 5407.5, 5510.5, 5613.5, 5716.5, 5819.5, 5922.5, 6025.5, 6128.5, 6231.5, 6334.5, 6437.5, 6540.5, 6643.5]
  arendbins=[0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]

  project='MOSAiC-ACAS' ;Project name
  rate=1               ;Averaging time
  smethod='fastcircle' ;Sizing method, default is 'fastcircle'
  particlefile=1       ;Flag to output particle-by-particle data
  savfile=1            ;Flag to output sav file
  inttime_reject=1     ;Flag to turn shattering correction on/off
  reconstruct=0        ;Flag to turn particle reconstruction on/off
  stuckbits=1          ;Flag to turn stuck bit detection on/off
  water=0              ;Flag to turn water processing on/off
  fixedtas=10         ;Use a fixed TAS (m/s)
  timeoffset=0.0       ;Time correction
  greythresh=1         ;Grey threshold (for CIPG)
  ; outdir=''            ;Output directory
  output_dir_images = outdir
  pthfile= pthfile          ;File with state variables
  stretchcorrect = 1
  ncdfparticlefile = 1
  juelichfilter = 1
  eawmethod = 'centerin'

  ;Build structure and process data
  ;Fields not specified here will be updated with defaults in soda2_update_op.pro
  op={fn:fn, date:date, starttime:starttime, stoptime:stoptime, project:project,$
    outdir:outdir, timeoffset:timeoffset, format:probe.format, $
    subformat:probe.subformat, probetype:probe.probetype, res:probe.res, $
    armwidth:probe.armwidth, numdiodes:probe.numdiodes, probeid:probe.probeid,$
    shortname:probe.shortname,  wavelength:probe.wavelength, $
    seatag:probe.seatag, endbins:endbins, arendbins:arendbins, rate:rate, $
    smethod:smethod, pth:pthfile, particlefile:particlefile, savfile:savfile, $
    inttime_reject:inttime_reject, reconstruct:reconstruct, stuckbits:stuckbits,stretchcorrect:stretchcorrect,$
    water:water, fixedtas:fixedtas, greythresh:greythresh, ncdfparticlefile:ncdfparticlefile, juelichfilter:juelichfilter, eawmethod:eawmethod}

  soda2_process_2d, op
END

;mosaic08312020
;mosaic09022020
;mosaic09042020
;mosaic09072020
;mosaic09082020
;mosaic09102020
;mosaic09112020
;mosaic09132020


day = '31'
month = '08'
year = '2020'
restore, 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP.dat'
soda2_export_ncdf, data, outfile = 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP'+'.nc'

day = '02'
month = '09'
year = '2020'
restore, 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP.dat'
soda2_export_ncdf, data, outfile = 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP'+'.nc'

day = '04'
month = '09'
year = '2020'
restore, 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP.dat'
soda2_export_ncdf, data, outfile = 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP'+'.nc'

day = '07'
month = '09'
year = '2020'
restore, 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP.dat'
soda2_export_ncdf, data, outfile = 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP'+'.nc'

day = '08'
month = '09'
year = '2020'
restore, 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP.dat'
soda2_export_ncdf, data, outfile = 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP'+'.nc'

day = '10'
month = '09'
year = '2020'
restore, 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP.dat'
soda2_export_ncdf, data, outfile = 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP'+'.nc'

day = '11'
month = '09'
year = '2020'
restore, 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP.dat'
soda2_export_ncdf, data, outfile = 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP'+'.nc'

day = '13'
month = '09'
year = '2020'
restore, 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP.dat'
soda2_export_ncdf, data, outfile = 'E:\Backup MOSAiC Daten_nicht die Enddaten 20200925\MOSAiC_ACAS\Auswertung\NASA-AMES\PIP\'+year+month+day+'\'+month+day+year+'_000001_PIP'+'.nc'



END

